{% extends 'base.html' %}
{% load static %}

{% block title %}
  Dashboard
{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/dashboard.css' %}" />
{% endblock %}

{% block content %}
  <div class="banner-section">
    <div class="banner-content">
      <h1 class="title">Jobtrail</h1>
      <button class="btn">Add a new Application</button>
    </div>
    <img class="city-image" src="{% static 'images/city-image.svg' %}" alt="line art of a city landscape" />
  </div>

  <div class="metrics-section">
    <div class="metrics-panel">
      <h3 class="metric-title">Total Applications</h3>
      <p class="metric-data">12</p>
    </div>
    <div class="metrics-panel">
      <h3 class="metric-title">Interviews Scheduled</h3>
      <p class="metric-data">3</p>
    </div>
    <div class="metrics-panel">
      <h3 class="metric-title">Response Rate</h3>
      <p class="metric-data">70%</p>
    </div>
    <div class="metrics-panel">
      <h3 class="metric-title">Offer Rate</h3>
      <p class="metric-data">40%</p>
    </div>
  </div>

  <div class="dashboard-content">
    <div class="chart-section"></div>

    <div class="applications-section">
      <h2 class="applications-section-title">Job Applications</h2>

      {% for job_application in job_applications %}
        <div class="application-item">
          <div class="application-title">
            <h3><span class="company-text">{{job_application.company_name}}</span> | {{job_application.job_title}}</h3>
          </div>
          <div class="application-details">
            <span><span class="dashboard-bold">Status:</span> <span class="faded-text">{{job_application.get_status_display}}</span></span>
            <span><span class="dashboard-bold">Salary:</span> <span class="faded-text">â‚¬{{job_application.salary}}</span></span>
            <span><span class="dashboard-bold">Tags:</span> <span class="faded-text">
              {% for tag in job_application.tags.all %}
              <span style="color: {{ tag.color }}">{{ tag.name }}</span>{% if not forloop.last %}, {% endif %}
              {% endfor %}
            </span></span>
            <span class="faded-text">{{job_application.date_applied}}</span>
          </div>
        </div>
      {% endfor %}
      <div class="pagination">
        <span class="step-links">
            {% if page_obj.has_previous %}
                <a href="?page=1">&laquo; first</a>
                <a href="?page={{ page_obj.previous_page_number }}">previous</a>
            {% endif %}
    
            <span class="current">
                Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
            </span>
    
            {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}">next</a>
                <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
            {% endif %}
        </span>
    </div>
    </div>
  </div>
{% endblock %}
